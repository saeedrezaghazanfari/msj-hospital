function ajaxCall(){this.send=function(t,e,i,s,o){o=o||"json";var a=function(t){s(t)},n=function(t){console.log(t)};jQuery.ajax({url:e,type:i,data:t,success:a,error:n,dataType:o,timeout:6e4})}}function locationInfo(){var t="//geodata.solutions/api/api.php",e="";jQuery("#gds_appid").length>0&&(e+="&appid="+jQuery("#gds_appid").val()),jQuery("#gds_hash").length>0&&(e+="&hash="+jQuery("#gds_hash").val());var i=new ajaxCall;this.confCity=function(e){var s=t+"?type=confCity&countryId="+jQuery("#countryId option:selected").attr("countryid")+"&stateId="+jQuery("#stateId option:selected").attr("stateid")+"&cityId="+e;i.send({},s,"post",function(t){})},this.getCities=function(s){jQuery(".cities option:gt(0)").remove();var o=jQuery("#cityId").attr("class").split(" ");o.shift();var a="";o.length>0&&(a="&addClasses="+encodeURIComponent(acC=o.join()));var n=t+"?type=getCities&countryId="+jQuery("#countryId option:selected").attr("countryid")+"&stateId="+s+e+a;jQuery(".cities").find("option:eq(0)").html("Please wait.."),i.send({},n,"post",function(t){if(jQuery(".cities").find("option:eq(0)").html("Select City"),1==t.tp){if(t.hits>1e3?console.log("Daily geodata.solutions request limit exceeded count:"+t.hits+" of 1000"):console.log("Daily geodata.solutions request count:"+t.hits+" of 1000"),Object.keys(t.result).length>0)jQuery.each(t.result,function(t,e){var i=jQuery("<option />");i.attr("value",e).text(e),jQuery(".cities").append(i)});else{var e=jQuery("#stateId option:selected").val(),i=jQuery("<option />");i.attr("value",e).text(e),i.attr("selected","selected"),jQuery(".cities").append(i)}jQuery(".cities").prop("disabled",!1)}else alert(t.msg)})},this.getStates=function(s){jQuery(".states option:gt(0)").remove(),jQuery(".cities option:gt(0)").remove();var o=jQuery("#stateId").attr("class").split(" ");o.shift();var a="";o.length>0&&(a="&addClasses="+encodeURIComponent(acC=o.join()));var n=t+"?type=getStates&countryId="+s+e+a;jQuery(".states").find("option:eq(0)").html("Please wait.."),i.send({},n,"post",function(t){jQuery(".states").find("option:eq(0)").html("Select State"),1==t.tp?(t.hits>1e3?console.log("Daily geodata.solutions request limit exceeded:"+t.hits+" of 1000"):console.log("Daily geodata.solutions request count:"+t.hits+" of 1000"),jQuery.each(t.result,function(t,e){var i=jQuery("<option />");i.attr("value",e).text(e),i.attr("stateid",t),jQuery(".states").append(i)}),jQuery(".states").prop("disabled",!1)):alert(t.msg)})},this.getCountries=function(){var s=jQuery("#countryId").attr("class").split(" ");s.shift();var o="";s.length>0&&(o="&addClasses="+encodeURIComponent(acC=s.join()));var a=!1;jQuery.each(s,function(t,e){e.match("^presel-")&&(a=e.substring(7)),e.match("^presel-byi")});var n=t+"?type=getCountries"+e+o;jQuery(".countries").find("option:eq(0)").html("Please wait.."),i.send({},n,"post",function(t){if(jQuery(".countries").find("option:eq(0)").html("Select Country"),1==t.tp){if(t.hits>1e3?console.log("Daily geodata.solutions request limit exceeded:"+t.hits+" of 1000"):console.log("Daily geodata.solutions request count:"+t.hits+" of 1000"),"byip"==a&&(a=t.presel,console.log("2 presel is set as "+a)),jQuery.inArray("group-continents",s)>-1){var e=jQuery(".countries");console.log(t.result),jQuery.each(t.result,function(t,i){var s=jQuery("<optgroup>",{label:t});i.length>0&&s.appendTo(e),jQuery.each(i,function(t,e){var i=jQuery("<option />");i.attr("value",e.name).text(e.name),i.attr("countryid",e.id),a&&a.toUpperCase()==e.id&&i.attr("selected","selected"),i.appendTo(s)})})}else jQuery.each(t.result,function(t,e){var i=jQuery("<option />");i.attr("value",e).text(e),i.attr("countryid",t),a&&a.toUpperCase()==t&&i.attr("selected","selected"),jQuery(".countries").append(i)});a&&jQuery(".countries").trigger("change"),jQuery(".countries").prop("disabled",!1)}else alert(t.msg)})}}jQuery(function(){var t=new locationInfo;t.getCountries(),jQuery(".countries").on("change",function(e){var i=jQuery("option:selected",this).attr("countryid");""!=i?t.getStates(i):jQuery(".states option:gt(0)").remove()}),jQuery(".states").on("change",function(e){var i=jQuery("option:selected",this).attr("stateid");""!=i?t.getCities(i):jQuery(".cities option:gt(0)").remove()}),jQuery(".cities").on("change",function(e){var i=jQuery("option:selected",this).val();""!=i&&t.confCity(i)})});